<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Xadrez - Agatha vs Henrique</title>
  <style>
    /* Estilos gerais */
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f5f5f5;
      color: #333;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #820ad1; /* Cor roxa do projeto */
      color: white;
      padding: 10px 0;
    }

    h1 {
      margin: 0;
    }

    /* Contêiner dos jogadores */
    #players {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      width: 90%;
      max-width: 400px;
      margin: 20px auto;
    }

    .player {
      width: 100px;
      height: 100px;
      background-size: cover;
      background-position: center;
      border-radius: 50%;
    }

    /* Tabuleiro de xadrez */
    #chessboard {
      display: grid;
      grid-template-columns: repeat(8, 50px);
      grid-template-rows: repeat(8, 50px);
      gap: 0;
      margin: 0 auto;
      width: 400px;
      height: 400px;
      border: 3px solid #333;
    }

    .square {
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .light {
      background-color: #f0d9b5;
    }

    .dark {
      background-color: #b58863;
    }

    .piece {
      cursor: grab;
    }
  </style>
</head>
<body>
  <header>
    <h1>Xadrez - Agatha vs Henrique</h1>
  </header>

  <main>
    <!-- Contêiner dos jogadores -->
    <div id="players">
      <div id="player1" class="player"></div>
      <div id="player2" class="player"></div>
    </div>

    <!-- Tabuleiro de xadrez -->
    <div id="chessboard"></div>
  </main>

  <script>
    const board = document.getElementById("chessboard");

    // Representação inicial do tabuleiro com os símbolos das peças de xadrez
    const initialBoard = [
      ["♜", "♞", "♝", "♛", "♚", "♝", "♞", "♜"],
      ["♟", "♟", "♟", "♟", "♟", "♟", "♟", "♟"],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["♙", "♙", "♙", "♙", "♙", "♙", "♙", "♙"],
      ["♖", "♘", "♗", "♕", "♔", "♗", "♘", "♖"]
    ];

    // Função para renderizar o tabuleiro
    function renderBoard() {
      board.innerHTML = ""; // Limpa o tabuleiro
      for (let i = 0; i < 8; i++) {
        for (let j = 0; j < 8; j++) {
          const square = document.createElement("div");
          square.classList.add("square");
          square.classList.add((i + j) % 2 === 0 ? "light" : "dark");
          square.dataset.row = i;
          square.dataset.col = j;

          const piece = initialBoard[i][j];
          if (piece) {
            const pieceElement = document.createElement("span");
            pieceElement.classList.add("piece");
            pieceElement.textContent = piece; // Adiciona o símbolo da peça
            pieceElement.draggable = true; // Permite arrastar as peças
            square.appendChild(pieceElement);
          }

          board.appendChild(square);
        }
      }
    }

    // Evento de drag-and-drop para movimentar as peças
    board.addEventListener("dragstart", (e) => {
      const target = e.target.closest(".piece");
      if (target) {
        e.dataTransfer.setData("text/plain", `${target.parentElement.dataset.row},${target.parentElement.dataset.col}`);
      }
    });

    board.addEventListener("dragover", (e) => {
      e.preventDefault(); // Permite o drop
    });

    board.addEventListener("drop", (e) => {
      const from = e.dataTransfer.getData("text/plain").split(",");
      const toRow = e.target.dataset.row;
      const toCol = e.target.dataset.col;

      if (toRow && toCol) {
        const piece = initialBoard[from[0]][from[1]];
        initialBoard[from[0]][from[1]] = ""; // Remove a peça da posição inicial
        initialBoard[toRow][toCol] = piece; // Adiciona a peça na nova posição
        renderBoard(); // Atualiza o tabuleiro
      }
    });

    // Renderiza o tabuleiro inicial
    renderBoard();

    // Exibição das informações dos jogadores
    const player1 = document.getElementById("player1");
    const player2 = document.getElementById("player2");

    player1.style.backgroundImage =
      "url('https://res.cloudinary.com/base-web/image/fetch/w_128/f_webp/https%3A%2F%2Fbase.mypinata.cloud%2Fipfs%2Fbafkreiauxlzfiyfpboffxayqm3bce6obvuqxebxt65crgchg4edlldkaea%3FpinataGatewayToken%3Df6uqhE35YREDMuFqLvxFLqd-MBRlrJ1qWog8gyCF8T88-Tsiu2IX48F-kyVti78J')";

    player2.style.backgroundImage =
      "url('https://res.cloudinary.com/base-web/image/fetch/w_128/f_webp/https%3A%2F%2Fzku9gdedgba48lmr.public.blob.vercel-storage.com%2Fbasenames%2Favatar%2Fhenriquetoja.base.eth%2F1724832735795%2FHenriquetoja.eth-03ALzc0cPOlJlWugi3GHBAl0xokXow.jpg')";
  </script>
</body>
</html>
